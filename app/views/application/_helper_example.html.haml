- example = ''

%h3.heading-small{ id: "form-#{label.parameterize}" }= label

= form_for(model.new) do |f|
  - example = capture { eval(code) }

  .example
    = example

%p code:
%pre
  %code.language-ruby
    = preserve do
      :escaped
        = form_for #{model.name.underscore} do |f|
          - #{code}

%p outputs:
%pre
  %code.language-markup
    = preserve do
      #{"\n" + example.gsub('><', ">\n  <").gsub('  </', '</') }

- if locales_config
  %p locales file:
  %pre
    %code.language-yaml
      = preserve do
        :escaped
          #{locales_config}